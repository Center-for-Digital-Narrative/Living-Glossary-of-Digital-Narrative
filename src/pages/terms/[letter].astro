---
import { getCollection, getEntry } from 'astro:content';
import BaseLayout from "../../layouts/BaseLayout.astro";
import NavSmall from "../../components/NavSmall.astro";
import ShortTerm from "../../components/ShortTerm.astro";
import TermSnippet from "../../components/TermSnippet.astro";

export async function getStaticPaths() {
    const allPosts = await getCollection('terms');
    const alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('');

    return alphabet.map(letter => {
        // Filter terms that start with the current letter
        const termsStartingWithLetter = allPosts.filter(post => post.slug.toLowerCase().startsWith(letter));

        return {
            params: { letter }, // Dynamic route parameter for the letter
            props: { terms: termsStartingWithLetter }, // Pass filtered terms as props
        };
    });
}

const { letter } = Astro.params
const { terms } = Astro.props;

---

<BaseLayout pageTitle={letter.toUpperCase() + ' | LGDN'}>
    <NavSmall />
    <div class="container mt-10">
        <h1 class="text-secondary text-4xl font-bold mb-10">Terms beginning with <span transition:name=`letter ${letter.toUpperCase()}`>{letter.toUpperCase()}</span></h1>
        {terms.map( (post:any) => <TermSnippet url={`/terms/${post.slug}/`} title={post.data.title} desc={post.data.description}/>)}
    </div>
</BaseLayout>