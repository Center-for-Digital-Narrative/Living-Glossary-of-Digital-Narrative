---
import { getCollection } from "astro:content";

interface Props {
    items: string;
}

const { items } = Astro.props;
const parsedItems:string[] = JSON.parse(items);

const allEntries = await getCollection("terms"); // Change to your actual collection name

const getItem = (slug: string) => {
    const item = allEntries.find((entry) => entry.slug === slug);
    if(!item) return null;
    return item.data.author ? { title: item.data.title, link: `/terms/${item.slug}` } : { title: item.data.title };
};
---
{items.length > 0 && (
    <h2>See Also</h2>
    <ul>
      {parsedItems.map(slug => {
        const item = getItem(slug);
        if(!item) return null;
        return item.link ? <li><a href={item.link}>{item.title}</a></li> : <li>{item.title}</li>;
      })}
    </ul>
)}
