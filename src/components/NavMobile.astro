---
import {Astronav, MenuItems, MenuIcon, StickyHeader, Dropdown, DropdownItems} from "astro-navbar";
import ThemeIcon from "./ThemeIcon.astro";
import {allLetters, lettersWithoutTerms} from "../utils/letters";
const { class: className, ...rest } = Astro.props
---
<style>
    .letter-button {
        background: rgb(255 255 255 / 16%);
        width: 38px;
    }
    .letter-button:hover {
        background: rgb(255 255 255 / 50%);
    }
</style>
<StickyHeader
        data-pagefind-ignore="all"
        class:list={['md:hidden sticky top-0 z-20 transition-all bg-dark-blue text-white', className]} {...rest}
        scrollY={50}
        defaultClass="py-2"
        activeClass="py-2">
    <Astronav>
        <div class="flex justify-between pr-2 items-center">
            <a href="/" class="flex items-center">
                <img src="/CDN-icon_Negative_color.svg" class="h-12" />
                <span class="font-semibold hover:underline">The Living Glossary of Digital Narrative</span>
            </a>
            <div class="flex items-center justify-center bg-white rounded-full" style="min-width: 32px; width:32px; height:32px;">
                <MenuIcon class="w-4 h-4 text-black" />
            </div>
        </div>
        <MenuItems class="hidden pt-3">
            <ul class="text-lg text-gray-200">
                <li class="block px-4 py-2 border-t border-gray-600">
                    <Dropdown class="group">
                        <button class="flex items-center gap-1 w-full">
                            <span>Center for Digital Narrative</span>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-3 h-3 mt-0.5 group-open:rotate-180">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
                            </svg>
                        </button>
                        <DropdownItems>
                            <div>
                                <ul class="px-3">
                                    <li class="py-1">
                                        <a href="/" class="border-b">Glossary</a>
                                    </li>
                                    <li class="py-1">
                                        <a href="https://elmcip.net">ELMCIP</a>
                                    </li>
                                    <li class="py-1">
                                        <a href="https://cellproject.net/">CELL</a>
                                    </li>
                                    <li class="py-1">
                                        <a href="https://collection.cdn.uib.no">Collection</a>
                                    </li>
                                </ul>
                            </div>
                        </DropdownItems>
                    </Dropdown>
                </li>
                <li class="block px-4 py-2 border-y border-gray-600">
                    <a href="/about/" class="hover:underline">About</a>
                </li>
                <li class="block px-4 py-2 border-b border-gray-600">
                    <a href="/submit/" class="hover:underline">Submit</a>
                </li>
                <li class="block px-4 py-2 border-b border-gray-600">
                    <a href="/search/" class="hover:underline">Search</a>
                </li>
                <li class="flex flex-row flex-wrap gap-2 px-3 pt-4 pb-2">
                    <style>
                        li > a {
                            flex-basis: calc(100% / 7 - 0.5rem); /* 7 items per row */
                        }
                    </style>
                    {allLetters.map(l => (
                        (lettersWithoutTerms.includes(l))
                            ? <a class="cursor-default opacity-20 px-3 py-2 text-sm font-medium text-center text-white rounded-lg">{l.toUpperCase()}</a>
                            : <a href={`/terms/${l}`} class="px-3 py-2 text-sm font-medium text-center text-white rounded-lg letter-button">{l.toUpperCase()}</a>
                    ))}
                    <a>&nbsp;</a>
                    <ThemeIcon />
                </li>
            </ul>
        </MenuItems>
    </Astronav>
</StickyHeader>